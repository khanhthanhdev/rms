# ModernStack SaaS Starter - SvelteKit + Convex + Better Auth

A production-ready SaaS starter template built for the [Modern Stack Hackathon](https://www.convex.dev/hackathons/modernstack), featuring SvelteKit, Convex, Better Auth, and more.

## Tech Stack

- **[SvelteKit](https://kit.svelte.dev/)** with **[Svelte 5](https://svelte.dev/)** - Modern, reactive frontend framework
- **[Convex](https://convex.dev/)** - Real-time backend database with serverless functions
- **[Better Auth](https://www.better-auth.com/)** - Comprehensive authentication solution with email/password and OAuth
- **[Resend](https://resend.com/)** - Transactional email service for password resets and email verification
- **[shadcn-svelte](https://www.shadcn-svelte.com/)** - Beautiful, accessible UI components
- **[Tailwind CSS v4](https://tailwindcss.com/)** - Utility-first CSS framework
- **[Lucide](https://lucide.dev/)** - Beautiful icon library

## Features

- âœ… **Authentication System**
  - Email/password authentication
  - Google OAuth support
  - Password reset flow
  - Email change with verification
  - Session management

- âœ… **User Management**
  - User profile settings
  - Avatar upload with Convex storage
  - Account information management

- âœ… **UI Components**
  - Dashboard with charts and data tables
  - Sidebar navigation
  - Settings pages (Account, Password, Email)
  - Responsive design
  - Dark/light mode ready

- âœ… **Developer Experience**
  - TypeScript throughout
  - Type-safe database queries
  - Hot module replacement
  - ESLint & Prettier configured
  - LLM-focused documentation in `/docs` + `CLAUDE.md` for AI-assisted development
  - GitHub Actions CI/CD for code quality checks and Cloudflare deployments

## Roadmap

Planned features and improvements:

- [x] **OAuth Support** - Complete social provider integration and example with Google OAuth
- [ ] **Multi-tenancy / Team Support** - Organizations, team invites, and role-based permissions
- [ ] **GitHub Action for Cloudflare Workers** - Currently, only Cloudflare Pages deployment is fully functional
- [ ] **Rate Limiting** - API rate limiting and request throttling
- [ ] **Stripe Stats in Admin Dashboard** - Revenue analytics and subscription metrics
- [ ] **Welcome Email Template** - Branded welcome emails for new users
- [ ] **E2E Tests with Playwright** - Comprehensive end-to-end testing suite

## Getting Started

### Prerequisites

- Node.js 18+
- pnpm (recommended) or npm

### Installation

1. Clone the repository:

```sh
git clone https://github.com/joachimchauvet/modernstack-saas
cd modernstack-saas
```

2. Install dependencies:

```sh
pnpm install
```

3. Initialize Convex:

```sh
pnpm convex dev
```

When you run `convex dev` for the first time, it will:

- Create a new Convex project (or connect to an existing one)
- Generate your Convex deployment URL
- Output your `CONVEX_DEPLOYMENT` and `PUBLIC_CONVEX_URL` values in `.env.local`

4. Set up environment variables:

Convex functions run in Convex's cloud environment and can't read your local .env files. You must set environment variables separately for Convex and SvelteKit.

#### A. Set Convex Environment Variables

After `convex dev` completes, set these in Convex's environment:

```sh
# Required - Better Auth needs this to set cookies correctly
npx convex env set SITE_URL http://localhost:5173

# Required - Generate a secret for Better Auth
npx convex env set BETTER_AUTH_SECRET=$(openssl rand -base64 32)

# Required if you want email functionality (password reset, email change)
npx convex env set RESEND_API_KEY your_resend_api_key
npx convex env set RESET_EMAIL_FROM "Your App <no-reply@yourdomain.com>"

# Optional - Customize reply to address
npx convex env set RESET_EMAIL_REPLY_TO support@yourdomain.com

# Optional - Enable Google OAuth (see docs/better_auth.md for setup)
npx convex env set GOOGLE_CLIENT_ID your_google_client_id
npx convex env set GOOGLE_CLIENT_SECRET your_google_client_secret
```

Verify your Convex env vars are set:

```sh
npx convex env list
```

After setting Convex environment variables, restart your convex dev server (`pnpm convex dev`).

#### B. Set SvelteKit Environment Variables

Update your `.env.local` file in the root directory:

```env
# PUBLIC_CONVEX_URL is auto-generated by Convex
PUBLIC_CONVEX_URL=https://xxx.convex.cloud

# PUBLIC_CONVEX_SITE_URL: Convert the .convex.cloud URL to .convex.site
# Example: if PUBLIC_CONVEX_URL is https://xxx.convex.cloud,
# then PUBLIC_CONVEX_SITE_URL should be https://xxx.convex.site
PUBLIC_CONVEX_SITE_URL=https://xxx.convex.site

# This should match what you set in Convex (used by SvelteKit hooks)
SITE_URL=http://localhost:5173
```

5. Start the development server:

```sh
pnpm dev
```

The app will be running at `http://localhost:5173`

## Development

Run both the SvelteKit dev server and Convex in parallel:

```sh
# Terminal 1 - Convex backend
pnpm convex dev

# Terminal 2 - SvelteKit frontend
pnpm dev
```

## Project Structure

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ components/     # UI components
â”‚   â”‚   â”œâ”€â”€ auth-client.ts  # Better Auth client
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ (app)/          # Protected routes
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â””â”€â”€ auth/           # Authentication routes
â”‚   â””â”€â”€ convex/             # Convex backend
â”‚       â”œâ”€â”€ auth.ts         # Auth configuration
â”‚       â”œâ”€â”€ storage.ts      # File storage
â”‚       â””â”€â”€ ...
```

## Building for Production

Create a production build:

```sh
pnpm build
```

Preview the production build:

```sh
pnpm preview
```

## Deployment

This starter uses [adapter-cloudflare](https://kit.svelte.dev/docs/adapter-cloudflare) by default, but you can swap it for any SvelteKit adapter:

- [Vercel](https://kit.svelte.dev/docs/adapter-vercel)
- [Netlify](https://kit.svelte.dev/docs/adapter-netlify)
- [Node](https://kit.svelte.dev/docs/adapter-node)
- [Other adapters](https://kit.svelte.dev/docs/adapters)

### Deployment Steps

1. Deploy your Convex backend:

```sh
pnpm convex deploy
```

2. Set Convex environment variables for production:

```sh
# Update SITE_URL to your production domain
npx convex env set SITE_URL https://yourdomain.com

# Set other Convex env vars if not already set
npx convex env set BETTER_AUTH_SECRET=$(openssl rand -base64 32)
npx convex env set RESEND_API_KEY your_resend_api_key
npx convex env set RESET_EMAIL_FROM "Your App <no-reply@yourdomain.com>"
npx convex env set RESET_EMAIL_REPLY_TO support@yourdomain.com
npx convex env set GOOGLE_CLIENT_ID your_google_client_id
npx convex env set GOOGLE_CLIENT_SECRET your_google_client_secret
```

3. Set SvelteKit environment variables for build:

These variables use SvelteKit's `$env/static/*` imports, which means they're baked into the bundle at build time. Set them where your build runs, not in your hosting platform's runtime environment variables.

- `PUBLIC_CONVEX_URL` - Your Convex deployment URL
- `PUBLIC_CONVEX_SITE_URL` - Your Convex site URL
- `SITE_URL` - Your production domain (e.g., `https://yourdomain.com`)

**If using GitHub Actions** (like the included Cloudflare Pages workflow):

Set these as GitHub repository variables (Settings â†’ Secrets and variables â†’ Actions â†’ Variables):

- `PUBLIC_CONVEX_URL`
- `PUBLIC_CONVEX_SITE_URL`
- `SITE_URL`

The workflow will automatically use these during the build step.

**If deploying directly from your machine or other CI/CD:**

Set these as environment variables when running `pnpm build`:

- **Vercel**: Project Settings â†’ Environment Variables (make sure they're available at build time)
- **Netlify**: Site Settings â†’ Environment Variables (available during build)
- **Cloudflare Pages**: Settings â†’ Environment Variables (if not using GitHub Actions)
- **Cloudflare Workers**: `wrangler secret put VARIABLE_NAME` (for runtime secrets only)

4. Deploy your frontend to your chosen platform

## Documentation

This project includes comprehensive documentation optimized for LLM consumption:

- **`/docs`** - Framework-specific guides and best practices
  - `svelte/` - Svelte 5 runes, reactivity, templating, and state management
  - `better_auth.md` - Authentication setup and patterns
  - `convex.md` - Backend queries, mutations, and real-time data
  - `tailwind_v4.md` - Styling with Tailwind CSS v4

## CI/CD

GitHub Actions workflows are included for:

- **Code Quality** (`.github/workflows/code-quality.yml`) - Linting, formatting, type checking, and spell checking on every push/PR
- **Cloudflare Pages** (`.github/workflows/cloudflare-pages.yml`) - Automatic deployments with preview URLs for pull requests
- **Cloudflare Workers** (`.github/workflows/deploy-workers.yml`) - Alternative deployment target with more features

## Built for Modern Stack Hackathon

This starter template was created for the [Convex Modern Stack Hackathon](https://www.convex.dev/hackathons/modernstack), showcasing the power of combining modern web technologies to build production-ready SaaS applications.

---

## ðŸš€ Ready to Ship?

**Stop plumbing, start vibing.** Modern stack, zero setup headaches.

âœ“ Auth â€¢ âœ“ Payments â€¢ âœ“ Real-time DB â€¢ âœ“ Your brilliant idea? **Add here â†’**

[**Fork & Ship on GitHub**](https://github.com/joachimchauvet/modernstack-saas) â€¢ MIT Licensed â€¢ Built for developers
